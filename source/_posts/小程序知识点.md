---
title: 小程序知识点
categories:
  - 小程序
abbrlink: 26f23a6e
date: 2020-05-04 23:14:02
tags:
---

> ### wx:key

wx:key的作用是为了<code>提升渲染的性能</code>,通过key，有了的key就不渲染，保持原有状态，没有key就新增加渲染。

如果标签只使用了wx:for，未写wx:key，那么会默认用索引做key。

<code>*this</code>保留关键字，代表在for循环中的item本身，这种表示需要item本身是一个唯一的字符串或者数字。

<!-- more -->

```js
// 知识点：
// 修改默认item、index为其他别名
<block 
wx:for="{{list}}"                  wx:for-item="myItem"
wx:for-index="myIndex"
wx:key="*this">

  <switch/>
  <view>{{myItem}}-----{{myIndex}}</view>

</block>

<button bindtap="_add">添加</button>

// js文件
data: {
  list: {
    'a',
    'b',
    'c'
  }
},
_add: function () {
  this.data.list.unshift('d')
  this.setData({
    list: this.data.list
  })
}
```
<font color="gold">解析：</font>

如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如input中的输入内容，switch的选中状态），需要使用wx:key来指定列表中项目的唯一标识符。

上面的例子：刚开始的时候页面有a、b、c和分别前面3个开关，当把开关按钮打开的时候，打开的状态。

<font color="pink">不使用wx:key的话</font> : 当在a前面插入了一个d和switch开关的时候，d前面的switch按钮会是打开的状态，c前面的switch按钮会成为关闭状态，因为渲染的状态是根据0、1、2索引顺序渲染的。

<font color="pink">使用wx:key的话</font> : 就会在a前面插入一个d和switch开关，并且d前面的switch按钮是关闭的，abc的switch开关是打开的状态，因为有key来做为标识。

> ### 绑定事件bind 、 catch、 capture-bind、 capture-bind
```js
<view bindtap="_handlerEvent">冒泡</view>

<view catchtap="_handlerEvent">阻止冒泡</view>

<view capture-bind:tap="_handlerEvent">捕获事件</view>

<view capture-catch:tap="_handlerEvent">阻止捕获事件</view>
```
<font color="gold">解析：</font>

<code>冒泡是从内到外，捕获是从外到内</code>

bind绑定的事件会冒泡，会冒泡到上一级的事件

catch绑定的事件不会冒泡，会阻止冒泡

capture-bind绑定的事件会捕获，也就是会从外向内依次触发

capture-catch绑定的事件会阻止捕获，也就是只触发最外层的事件

> ### 微信小程序的支付功能

1.支付需要注册<code>企业小程序</code>，在注册的过程中需要营业执照等。
